<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>éæ´²åœ‹æ——æŒ‘æˆ° - ä¸ƒé¾ç Â·ä¸–ç•Œå†’éšª</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
      background: linear-gradient(135deg, #CD853F 0%, #DEB887 100%);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .header p {
      font-size: 1.2rem;
      color: #ffd700;
    }

    /* éŠæˆ²å€åŸŸ */
    .game-area {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.5);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    /* é€²åº¦æ¢ */
    .progress-bar {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: #ffd700;
      font-weight: bold;
    }

    /* è¨ˆæ™‚å™¨ */
    .timer {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 20px;
      font-weight: bold;
      transition: color 0.3s ease;
    }

    .timer.warning {
      color: #ff6b6b;
      animation: pulse 0.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* åœ‹æ——é¡¯ç¤ºå€ */
    .flag-container {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      min-height: 220px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .flag-title {
      color: #333;
      font-size: 1.5rem;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .flag-display {
      width: 100%;
      max-width: 400px;
      height: 200px;
      border: 3px solid #333;
      border-radius: 5px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
    }

    /* é¸é …æŒ‰éˆ•å€ */
    .options-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .option-btn {
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      padding: 20px;
      font-size: 1.3rem;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      min-height: 70px;
    }

    .option-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(76, 175, 80, 0.5);
    }

    .option-btn:active {
      transform: translateY(-1px);
    }

    .option-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* å›é¥‹è¨Šæ¯ */
    .feedback {
      display: none;
      text-align: center;
      padding: 15px;
      margin-top: 15px;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: bold;
    }

    .feedback.show {
      display: block;
    }

    .feedback.correct {
      background: rgba(76, 175, 80, 0.3);
      border: 2px solid #4CAF50;
      color: #4CAF50;
    }

    .feedback.wrong {
      background: rgba(255, 107, 107, 0.3);
      border: 2px solid #ff6b6b;
      color: #ff6b6b;
    }

    /* å‹•ä½œæŒ‰éˆ• */
    .action-buttons {
      display: none;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 15px;
    }

    .action-buttons.show {
      display: grid;
    }

    .btn {
      padding: 12px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      min-height: 50px;
    }

    .btn-next {
      background: linear-gradient(45deg, #2196F3, #1976D2);
      color: white;
    }

    .btn-next:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(33, 150, 243, 0.5);
    }

    .btn-restart {
      background: linear-gradient(45deg, #FF9800, #F57C00);
      color: white;
    }

    .btn-restart:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 152, 0, 0.5);
    }

    .btn-back {
      background: linear-gradient(45deg, #757575, #616161);
      color: white;
    }

    .btn-back:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(117, 117, 117, 0.5);
    }

    /* æˆåŠŸç•«é¢ */
    .success-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }

    .success-overlay.show {
      display: flex;
    }

    .success-content {
      text-align: center;
      animation: bounceIn 0.6s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); opacity: 1; }
    }

    .dragon-ball {
      width: 200px;
      height: 200px;
      margin: 0 auto 30px;
      background: radial-gradient(circle at 30% 30%, #ffd700, #ff8c00);
      border-radius: 50%;
      box-shadow: 0 0 60px #ffd700;
      animation: glow 1.5s infinite;
      position: relative;
    }

    .dragon-ball::after {
      content: 'â­';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4rem;
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 60px #ffd700; }
      50% { box-shadow: 0 0 100px #ffd700; }
    }

    .success-content h2 {
      font-size: 2.5rem;
      color: #ffd700;
      margin-bottom: 20px;
    }

    .success-content p {
      font-size: 1.5rem;
      margin-bottom: 30px;
    }

    /* å·²å®Œæˆæç¤º */
    .already-completed {
      text-align: center;
      padding: 40px;
    }

    .already-completed h3 {
      color: #ffd700;
      font-size: 2rem;
      margin-bottom: 20px;
    }

    /* è¦å‰‡èªªæ˜æ¨£å¼ */
    .africa-rule-box {
      background: rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 215, 0, 0.6);
      border-radius: 16px;
      padding: 18px 20px;
      margin: 16px auto 20px;
      max-width: 780px;
      color: #f9f9f9;
      box-shadow: 0 4px 18px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(6px);
    }

    .africa-rule-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .africa-rule-header h2 {
      margin: 0;
      font-size: 1.3rem;
      letter-spacing: 1px;
      color: #ffe066;
      text-shadow: 0 0 6px rgba(255, 223, 128, 0.7);
    }

    .rule-icon {
      font-size: 1.4rem;
    }

    .flag-icon {
      transform: translateY(1px);
    }

    .africa-rule-box p {
      margin: 8px 0;
      line-height: 1.6;
      font-size: 0.98rem;
    }

    .africa-rule-choices {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin: 10px 0 6px;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.06);
    }

    .choice {
      display: flex;
      align-items: center;
      gap: 6px;
      flex: 1;
    }

    .choice-arrow {
      font-size: 1.3rem;
    }

    .choice-text {
      font-size: 0.95rem;
    }

    .africa-rule-highlight {
      margin-top: 10px;
      padding-top: 6px;
      border-top: 1px dashed rgba(255, 255, 255, 0.25);
      font-weight: 600;
      color: #ffeaa7;
      text-align: center;
    }

    /* é–‹å§‹éŠæˆ²æŒ‰éˆ• */
    .start-game-btn {
      background: linear-gradient(45deg, #ff6b6b, #ff8787);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 1.3rem;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
      transition: all 0.3s ease;
      font-weight: bold;
      display: block;
      margin: 20px auto;
    }

    .start-game-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
    }

    .start-game-btn:active {
      transform: translateY(-1px);
    }

    /* éŸ¿æ‡‰å¼ */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 2rem;
      }

      .game-area {
        padding: 20px;
      }

      .timer {
        font-size: 2rem;
      }

      .flag-display {
        height: 150px;
      }

      .option-btn {
        font-size: 1.1rem;
        padding: 15px;
        min-height: 60px;
      }

      .dragon-ball {
        width: 150px;
        height: 150px;
      }

      .dragon-ball::after {
        font-size: 3rem;
      }

      .africa-rule-box {
        padding: 14px 14px;
      }

      .africa-rule-header h2 {
        font-size: 1.15rem;
      }

      .africa-rule-box p {
        font-size: 0.92rem;
      }

      .africa-rule-choices {
        flex-direction: column;
      }

      .choice-text {
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <!-- æ¨™é¡Œå€ -->
    <div class="header">
      <h1>ğŸŒ éæ´²åœ‹æ——æŒ‘æˆ°</h1>
      <p>èªè­˜éæ´²å„åœ‹çš„æ——å¹Ÿï¼</p>
    </div>

    <!-- è¦å‰‡èªªæ˜å€ -->
    <div id="rules-section">
      <div class="africa-rule-box">
        <div class="africa-rule-header">
          <span class="rule-icon">ğŸ</span>
          <h2>éæ´²åœ‹æ——è©¦ç…‰è¦å‰‡</h2>
          <span class="rule-icon flag-icon">ğŸŒ</span>
        </div>

        <p>
          éæ´²é—œå¡çš„åœ‹æ——è©¦ç…‰æ­£å¼é–‹å§‹ï¼æ¯ä¸€é¡Œæœƒå‡ºç¾ä¸€é¢ç¥ç¥•çš„éæ´²åœ‹æ——ï¼Œç­”æ¡ˆæœƒåˆ†æˆ
          <strong>å·¦å³å…©é‚Šçš„é¸é …</strong>ï¼Œå°å‹‡å£«å€‘å¿…é ˆè¦ªè‡ªç«™åˆ°è‡ªå·±ç›¸ä¿¡çš„é‚£ä¸€å´ã€‚
        </p>

        <div class="africa-rule-choices">
          <div class="choice">
            <span class="choice-arrow">â¬…ï¸</span>
            <span class="choice-text">å·¦é‚Šï¼šä»£è¡¨å…¶ä¸­ä¸€å€‹åœ‹å®¶é¸é …</span>
          </div>
          <div class="choice">
            <span class="choice-arrow">â¡ï¸</span>
            <span class="choice-text">å³é‚Šï¼šä»£è¡¨å¦ä¸€å€‹åœ‹å®¶é¸é …</span>
          </div>
        </div>

        <p>
          é¸æ“‡<strong>æ­£ç¢º</strong>çš„ä¸€æ–¹ï¼Œå¯ä»¥ç¹¼çºŒç•™ä¸‹ä¾†è¿æ¥ä¸‹ä¸€é¡Œï¼›<br>
          é¸æ“‡<strong>éŒ¯èª¤</strong>çš„ä¸€æ–¹ï¼Œå°‡æš«æ™‚é€€å‡ºé€™å ´è©¦ç…‰ï¼Œç„¡æ³•å†åƒèˆ‡å¾ŒçºŒç­”é¡Œã€‚
        </p>

        <p class="africa-rule-highlight">
          åªè¦ 11 ä½å°å‹‡å£«ä¹‹ä¸­ï¼Œæœ‰ä»»ä½•ä¸€äººèƒ½åœ¨åœ‹æ——æŒ‘æˆ°ä¸­
          <strong>é€£çºŒç­”å°äº”é¡Œ</strong>ï¼Œ<br>
          å…¨éšŠä¾¿èƒ½ä¸€èµ·é€šééæ´²è©¦ç…‰ï¼ŒæˆåŠŸå–å¾—è±¡å¾µå‹‡æ°£çš„é¾ç ï¼
        </p>
      </div>

      <button class="start-game-btn" onclick="startGameFromRules()">ğŸš€ é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <!-- éŠæˆ²å€åŸŸ -->
    <div class="game-area" id="game-area" style="display: none;">
      <!-- é€²åº¦æ¢ -->
      <div class="progress-bar" id="progress">
        é—œå¡é€²åº¦ï¼š<span id="current-question">0</span> / 5
      </div>

      <!-- è¨ˆæ™‚å™¨ -->
      <div class="timer" id="timer">
        å‰©é¤˜æ™‚é–“ï¼š<span id="time-left">10</span> ç§’
      </div>

      <!-- åœ‹æ——é¡¯ç¤ºå€ -->
      <div class="flag-container">
        <div class="flag-title">é€™æ˜¯å“ªå€‹åœ‹å®¶çš„åœ‹æ——ï¼Ÿ</div>
        <div class="flag-display" id="flag-display"></div>
      </div>

      <!-- é¸é …æŒ‰éˆ• -->
      <div class="options-container" id="options-container">
        <button class="option-btn" id="option-1" onclick="selectAnswer(0)">é¸é … 1</button>
        <button class="option-btn" id="option-2" onclick="selectAnswer(1)">é¸é … 2</button>
      </div>

      <!-- å›é¥‹è¨Šæ¯ -->
      <div class="feedback" id="feedback"></div>

      <!-- å‹•ä½œæŒ‰éˆ• -->
      <div class="action-buttons" id="action-buttons">
        <button class="btn btn-next" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
        <button class="btn btn-restart" onclick="restartGame()">é‡æ–°é–‹å§‹</button>
      </div>
    </div>

    <!-- è¿”å›æŒ‰éˆ• -->
    <div style="text-align: center;">
      <button class="btn btn-back" onclick="goBack()">ğŸ—ºï¸ è¿”å›ä¸–ç•Œåœ°åœ–</button>
    </div>
  </div>

  <!-- æˆåŠŸç•«é¢ -->
  <div class="success-overlay" id="success-overlay">
    <div class="success-content">
      <div class="dragon-ball"></div>
      <h2>æ­å–œé€šé—œï¼</h2>
      <p id="success-message">ä½ æˆåŠŸå–å¾—äº†ç¬¬ X é¡†é¾ç ï¼</p>
      <button class="btn btn-back" onclick="goBack()">è¿”å›ä¸–ç•Œåœ°åœ–</button>
    </div>
  </div>

  <!-- å¼•å…¥å…±ç”¨ JS -->
  <script src="../js/shared.js"></script>

  <script>
    const LOCATION_KEY = 'africa';

    // é¡Œåº«ï¼ˆ10 é¡Œéæ´²åœ‹æ——ï¼‰
    const questionBank = [
      {
        id: 1,
        flag: { colors: ['#009639', '#ffffff', '#009639'], type: 'horizontal', star: true },
        correct: 'å¥ˆåŠåˆ©äº',
        wrong: 'è‚¯äº',
        description: 'ç¶ -ç™½-ç¶ æ©«æ¢ç´‹'
      },
      {
        id: 2,
        flag: { colors: ['#000000', '#CE1126', '#007A3D'], type: 'horizontal', shield: true },
        correct: 'è‚¯äº',
        wrong: 'å¦å°šå°¼äº',
        description: 'é»‘-ç´…-ç¶ æ©«æ¢ç´‹å¸¶ç›¾ç‰Œ'
      },
      {
        id: 3,
        flag: { colors: ['#078930', '#FCDD09', '#DA121A'], type: 'horizontal' },
        correct: 'è¡£ç´¢æ¯”äº',
        wrong: 'è¿¦ç´',
        description: 'ç¶ -é»ƒ-ç´…æ©«æ¢ç´‹'
      },
      {
        id: 4,
        flag: { colors: ['#FCD116', '#CE1126', '#FCD116'], type: 'horizontal', star: true },
        correct: 'è¿¦ç´',
        wrong: 'å–€éº¥éš†',
        description: 'ç´…-é»ƒ-ç¶ æ©«æ¢ç´‹å¸¶é»‘æ˜Ÿ'
      },
      {
        id: 5,
        flag: { colors: ['#002868', '#ffffff', '#002868'], type: 'horizontal' },
        correct: 'æ³¢æœ­é‚£',
        wrong: 'ç´ç±³æ¯”äº',
        description: 'è—-ç™½-è—æ©«æ¢ç´‹'
      },
      {
        id: 6,
        flag: { colors: ['#007A4D', '#FFD100', '#DE3908'], type: 'horizontal' },
        correct: 'å–€éº¥éš†',
        wrong: 'å¡å…§åŠ çˆ¾',
        description: 'ç¶ -ç´…-é»ƒç›´æ¢ç´‹å¸¶æ˜Ÿ'
      },
      {
        id: 7,
        flag: { colors: ['#00853F', '#FFD100', '#00853F'], type: 'horizontal', star: true },
        correct: 'å¡å…§åŠ çˆ¾',
        wrong: 'é¦¬åˆ©',
        description: 'ç¶ -é»ƒ-ç´…ç›´æ¢ç´‹å¸¶æ˜Ÿ'
      },
      {
        id: 8,
        flag: { colors: ['#002395', '#ffffff', '#CE1126'], type: 'horizontal' },
        correct: 'è³´æ¯”ç‘äº',
        wrong: 'ç…å­å±±',
        description: 'è—-ç™½-ç´…æ¢ç´‹å¸¶æ˜Ÿ'
      },
      {
        id: 9,
        flag: { colors: ['#EF2B2D', '#ffffff', '#002F6C'], type: 'horizontal' },
        correct: 'å°šæ¯”äº',
        wrong: 'è¾›å·´å¨',
        description: 'ç¶ åº•å¸¶æ©™è€é·¹'
      },
      {
        id: 10,
        flag: { colors: ['#319400', '#000000', '#FFD100'], type: 'horizontal', bird: true },
        correct: 'è¾›å·´å¨',
        wrong: 'è«ä¸‰æ¯”å…‹',
        description: 'ç¶ -é»ƒ-ç´…é»‘å¸¶é³¥'
      }
    ];

    // éŠæˆ²ç‹€æ…‹
    let currentQuestionIndex = 0;
    let correctCount = 0;
    let timeLeft = 10;
    let timerInterval = null;
    let selectedQuestions = [];

    // åˆå§‹åŒ–
    function init() {
      // é¡¯ç¤ºè¦å‰‡èªªæ˜ï¼Œç­‰å¾…ç©å®¶é»æ“Šé–‹å§‹
      document.getElementById('rules-section').style.display = 'block';
      document.getElementById('game-area').style.display = 'none';
    }

    // å¾è¦å‰‡é é¢é–‹å§‹éŠæˆ²
    function startGameFromRules() {
      document.getElementById('rules-section').style.display = 'none';
      document.getElementById('game-area').style.display = 'block';
      startGame();
    }

    // é–‹å§‹éŠæˆ²
    function startGame() {
      // å¾é¡Œåº«éš¨æ©Ÿé¸ 5 é¡Œ
      selectedQuestions = getRandomQuestions(questionBank, 5);
      currentQuestionIndex = 0;
      correctCount = 0;
      showQuestion();
    }

    // éš¨æ©Ÿé¸é¡Œ
    function getRandomQuestions(bank, count) {
      const shuffled = [...bank].sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    // é¡¯ç¤ºé¡Œç›®
    function showQuestion() {
      if (currentQuestionIndex >= selectedQuestions.length) {
        // é€šé—œ
        completeChallenge();
        return;
      }

      const question = selectedQuestions[currentQuestionIndex];

      // æ›´æ–°é€²åº¦
      document.getElementById('current-question').textContent = currentQuestionIndex + 1;

      // æ¸²æŸ“åœ‹æ——
      renderFlag(question.flag);

      // éš¨æ©Ÿæ’åˆ—é¸é …
      const options = [question.correct, question.wrong].sort(() => Math.random() - 0.5);
      document.getElementById('option-1').textContent = options[0];
      document.getElementById('option-2').textContent = options[1];
      document.getElementById('option-1').disabled = false;
      document.getElementById('option-2').disabled = false;

      // éš±è—å›é¥‹èˆ‡æŒ‰éˆ•
      document.getElementById('feedback').classList.remove('show', 'correct', 'wrong');
      document.getElementById('action-buttons').classList.remove('show');

      // é‡ç½®è¨ˆæ™‚å™¨
      timeLeft = 10;
      updateTimer();
      startTimer();
    }

    // æ¸²æŸ“åœ‹æ——ï¼ˆç°¡åŒ–ç‰ˆï¼‰
    function renderFlag(flagData) {
      const flagDisplay = document.getElementById('flag-display');
      flagDisplay.innerHTML = '';

      if (flagData.type === 'horizontal') {
        flagData.colors.forEach(color => {
          const stripe = document.createElement('div');
          stripe.style.backgroundColor = color;
          stripe.style.flex = '1';
          flagDisplay.appendChild(stripe);
        });
        flagDisplay.style.display = 'flex';
        flagDisplay.style.flexDirection = 'column';
      }

      // åŠ ä¸Šæ¨™è¨˜ï¼ˆæ˜Ÿæ˜Ÿã€ç›¾ç‰Œç­‰ï¼‰
      if (flagData.star) {
        const star = document.createElement('div');
        star.textContent = 'â­';
        star.style.position = 'absolute';
        star.style.top = '50%';
        star.style.left = '50%';
        star.style.transform = 'translate(-50%, -50%)';
        star.style.fontSize = '3rem';
        flagDisplay.appendChild(star);
      }

      if (flagData.shield) {
        const shield = document.createElement('div');
        shield.textContent = 'ğŸ›¡ï¸';
        shield.style.position = 'absolute';
        shield.style.top = '50%';
        shield.style.left = '50%';
        shield.style.transform = 'translate(-50%, -50%)';
        shield.style.fontSize = '3rem';
        flagDisplay.appendChild(shield);
      }

      if (flagData.bird) {
        const bird = document.createElement('div');
        bird.textContent = 'ğŸ¦…';
        bird.style.position = 'absolute';
        bird.style.top = '20%';
        bird.style.left = '20%';
        bird.style.fontSize = '2rem';
        flagDisplay.appendChild(bird);
      }
    }

    // è¨ˆæ™‚å™¨
    function startTimer() {
      if (timerInterval) clearInterval(timerInterval);

      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimer();

        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          timeUp();
        }
      }, 1000);
    }

    function updateTimer() {
      const timerElem = document.getElementById('timer');
      document.getElementById('time-left').textContent = timeLeft;

      if (timeLeft <= 3) {
        timerElem.classList.add('warning');
      } else {
        timerElem.classList.remove('warning');
      }
    }

    // æ™‚é–“åˆ°
    function timeUp() {
      const question = selectedQuestions[currentQuestionIndex];
      showFeedback(false, question.correct);
      disableOptions();
    }

    // é¸æ“‡ç­”æ¡ˆ
    function selectAnswer(optionIndex) {
      clearInterval(timerInterval);

      const question = selectedQuestions[currentQuestionIndex];
      const selectedAnswer = document.getElementById(`option-${optionIndex + 1}`).textContent;
      const isCorrect = selectedAnswer === question.correct;

      showFeedback(isCorrect, question.correct);
      disableOptions();

      if (isCorrect) {
        correctCount++;
      }
    }

    // é¡¯ç¤ºå›é¥‹
    function showFeedback(isCorrect, correctAnswer) {
      const feedback = document.getElementById('feedback');
      feedback.classList.add('show');

      if (isCorrect) {
        feedback.classList.add('correct');
        feedback.textContent = 'âœ“ ç­”å°äº†ï¼';
      } else {
        feedback.classList.add('wrong');
        feedback.textContent = `âœ— æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${correctAnswer}`;
      }

      document.getElementById('action-buttons').classList.add('show');
    }

    // ç¦ç”¨é¸é …
    function disableOptions() {
      document.getElementById('option-1').disabled = true;
      document.getElementById('option-2').disabled = true;
    }

    // ä¸‹ä¸€é¡Œ
    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
    }

    // é‡æ–°é–‹å§‹
    function restartGame() {
      currentQuestionIndex = 0;
      correctCount = 0;
      showQuestion();
    }

    // å®ŒæˆæŒ‘æˆ°
    function completeChallenge() {
      clearInterval(timerInterval);

      // æª¢æŸ¥æ˜¯å¦å·²ç¶“å®Œæˆé
      const completed = getCompletedLocations();
      const isAlreadyCompleted = completed.includes(LOCATION_KEY);

      if (!isAlreadyCompleted) {
        // ç¬¬ä¸€æ¬¡å®Œæˆï¼Œè¨˜éŒ„é€²åº¦
        markLocationCompleted(LOCATION_KEY);
      }

      const ballCount = getDragonBallCount();

      // é¡¯ç¤ºè¨Šæ¯
      if (isAlreadyCompleted) {
        document.getElementById('success-message').textContent =
          `æ­å–œé€šé—œï¼ï¼ˆé¾ç å·²æ”¶é›†ï¼Œç›®å‰å…± ${ballCount} é¡†ï¼‰`;
      } else {
        document.getElementById('success-message').textContent =
          `ä½ æˆåŠŸå–å¾—äº†ç¬¬ ${ballCount} é¡†é¾ç ï¼`;
      }

      document.getElementById('success-overlay').classList.add('show');
    }

    // è¿”å›åœ°åœ–
    function goBack() {
      window.location.href = '../index.html';
    }

    // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
    init();
  </script>

</body>
</html>
